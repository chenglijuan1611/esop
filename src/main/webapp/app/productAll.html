<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>产线综合</title>
    <script src="jquery.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <link rel="stylesheet" href="bootstrap.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
            overflow: hidden;
        }

        [class*=col-] {
            padding: 0;
        }
		@media screen and (max-width: 2000px) {
			html {
	            font-size: 100px;
	        }
	        .productTotal_head {
	            margin-top: 0.3rem;
	            width: 94.00%;
	        }
	        .wash_name {
	            height: 301px;
	            background-color: #b9cde5;
	        }
	        .cleaner_name {
	            height: 215px;
	            background-color: #d7e4bd;
	        }
		}
		@media screen and (min-width: 2000px) {
			html {
	            font-size: 90px;
	        }
			.productTotal_head {
	            width: 94.00%;
	        }
	         .wash_name {
	            height: 273px;
	            background-color: #b9cde5;
	        }
	        .cleaner_name {
	            height: 195px;
	            background-color: #d7e4bd;
	        }
		}
        /* 页面头部样式 */
        
        .totalLogo_left {
            display: inline-block;
        }

        .totalLogo_right {
            display: inline-block;
        }

        /* 页面主体样式 */

        .totalLine_main {
            width: 94.00%;
            padding: 0;
        }
        .product_name {
            width: 100%;
            margin: 0;
            padding: 0;
        }
        /* 左侧样式 */
        
        .product_left .left_detail {
            width: 100%;
        }
        .product_left .left_detail tr th {
            font-size: 0.3rem;
            font-weight: bold;
            text-align: center;
            background-color: blue;
            border: 1px solid white;
            border-right: none;
            color: white;
        }
        .product_left .left_detail tr td {
            font-size: 0.3rem;
            font-weight: bold;
            text-align: center;
            border: 1px solid white;
        }
        /* .wash_name {
            height: 301px;
            background-color: #b9cde5;
        }
        .cleaner_name {
            height: 215px;
            background-color: #d7e4bd;
        } */
        .dish_name {
        	background-color: #ccc1da;
        }
        /* 右侧样式 */
        
        .product_right .data_all {
            width: 100%;
            background-color: skyblue;
        }
        .product_right .data_all tr th {
            width: 20%;
            font-size: 0.3rem;
            font-weight: bold;
            text-align: center;
            background-color: blue;
            border: 1px solid white;
            color: white;
        }
        .product_right .data_all tr td {
            width: 20%;
            font-size: 0.3rem;
            font-weight: bold;
            text-align: center;
            border: 1px solid white;
        }
        .wash_line {
            background-color: #b9cde5;
        }
        .cleaner_line {
            background-color: #d7e4bd;
        }
        .dish_line {
            background-color: #ccc1da;
        }
        /* 页面底部时间 */
        .totalLine_time {
            /* width: 100%; */
            margin: 0;
        }
        .line_time {
            /* width: 100%; */
            border-right: 1px solid white;
            background-color: blue;
            text-align: center;
            color: white;
            font-size: 0.4rem;
            font-weight: bolder;
            letter-spacing: 5px;
        }
    </style>
</head>

<body>
    <div class="container productTotal_head">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left totalLineHead_left">
                <img src="productLine.jpg" alt="松下产线" class="img-responsive totalLogo_left">
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right lineHead_right">
                <img src="productLine-letter.png" alt="松下家电" class="totalLogo_right">
            </div>
        </div>
    </div>

    <!-- 页面主体内容显示 -->
    <div class="container totalLine_main">
        <div class="row product_name">
            <div class="col-lg-3 col-md-3 col-sm-3 product_left">
                <table class="left_detail">
                    <tr><th>产品别</th></tr>
                    <tr class="dish_name"><td>洗碗机</td></tr>
                    <tr class="wash_name"><td>温水便座</td></tr>
                    <tr class="cleaner_name"><td>吸尘器</td></tr>
                    
                </table>
            </div>
            <div class="col-lg-9 col-md-9 col-sm-9 product_right">
                <table class="data_all">
       
                </table>
            </div>
        </div>
        <!-- 页面底部时间显示 -->
        <div class="row totalLine_time">
            <div class="col-lg-12 col-md-12 col-sm-12 line_time">
            </div>
        </div>
    </div>

    <script>
    	$(function() {
    		/* 页面底部时间显示 */
    		var div = document.querySelector('.line_time');
    		var timer, timer1;
            $.ajax({
            	url:'http://172.16.20.113:8080/panasonic_mes/plan2/showStatus2',
            	type: 'POST',
                dataType: 'json',
                success: function(data) {
                	timer1 = data[0].time.time;
                },
                error: function() {
                	alert('请求时间错误！！');
                }
            }) 
           function setTime() {
           	 timer1 += 1000;
           	 timer = new Date(timer1);
           	 var hours = (timer.getHours() / 10) >= 1 ? timer.getHours() : '0' + timer.getHours(); 
                var minutes = (timer.getMinutes() / 10) >= 1 ? timer.getMinutes() : '0' + timer.getMinutes();
                var seconds = (timer.getSeconds() / 10) >= 1 ? timer.getSeconds() : '0' + timer.getSeconds();
				 if(timer.getHours() < 12) {
					 div.innerHTML = timer.getFullYear() + '年' + (timer.getMonth() + 1) + '月' + timer.getDate()+ '日  上午 ' + hours + ':' + minutes + ':' + seconds;
				 }
				 else {
					 div.innerHTML = timer.getFullYear() + '年' + (timer.getMonth() + 1) + '月' + timer.getDate()+ '日  下午 ' + hours + ':' + minutes + ':' + seconds; 
				 }
                
            }
    		function rush() {
    			$.ajax({
    				url:'http://172.16.20.113:8080/panasonic_mes/plan2/showStatus',
    				type:'POST',
    				dataType:'json',
    				success: function(data) {
    					//console.log(data);
    					$('.data_all').html('');
    					var str = '';
    					str = '<tr class="line_name"><th>线别</th><th>当日计划</th><th>生产实绩</th><th>达成率</th><th>状态</th></tr>'
    					/* $('.data_all').append(str); */
    					$.each(data, function(index, item) {
    						/* 洗碗机的判定 */
    						if(item.CLASSIFICATION_CODE == 'BI') {
    							if(item.STATUS == '暂无计划'){
    								str += '<tr class="dish_line"><td>'+ item.NAME 
    									+ '</td><td>0</td><td>0</td><td>0</td><td>'
    									+ item.STATUS  + '</td></tr>'
    							}
    							else {
    								str += '<tr class="dish_line"><td>'
	    								+ item.NAME + '</td><td>'
	    								+ item.SUMPLANAMOUNT + '</td><td>'
	    								+ item.SUMPRODUCTAMOUNT + '</td><td>'
	    								+ (parseFloat(item.ACHIEVERATE) * 100).toFixed(2) + '%</td><td>'
	    								+ item.STATUS + '</td></tr>'
    							}
    						}
    						/* 便座的判断 */
    						if(item.CLASSIFICATION_CODE == 'EB') {
    							if(item.STATUS == '暂无计划'){
    								str += '<tr class="wash_line"><td>'+ item.NAME 
    									+ '</td><td>0</td><td>0</td><td>0</td><td>'
    									+ item.STATUS  + '</td></tr>'
    							}
    							else {
    								str += '<tr class="wash_line"><td>'
	    								+ item.NAME + '</td><td>'
	    								+ item.SUMPLANAMOUNT + '</td><td>'
	    								+ item.SUMPRODUCTAMOUNT + '</td><td>'
	    								+ (parseFloat(item.ACHIEVERATE) * 100).toFixed(2) + '%</td><td>'
	    								+ item.STATUS + '</td></tr>'
    							}
    						}
    						/* 吸尘器 */
    						if(item.CLASSIFICATION_CODE == 'VC') {
    							if(item.STATUS == '暂无计划'){
    								str += '<tr class="cleaner_line"><td>'+ item.NAME 
    									+ '</td><td>0</td><td>0</td><td>0</td><td>'
    									+ item.STATUS  + '</td></tr>'
    							}
    							else {
    								str += '<tr class="cleaner_line"><td>'
	    								+ item.NAME + '</td><td>'
	    								+ item.SUMPLANAMOUNT + '</td><td>'
	    								+ item.SUMPRODUCTAMOUNT + '</td><td>'
	    								+ (parseFloat(item.ACHIEVERATE) * 100).toFixed(2) + '%</td><td>'
	    								+ item.STATUS + '</td></tr>'
    							}
    						}
    					})
    					$('.data_all').html(str);
    					$('.wash_line').click(function() {
    		    			var productLine_name = $(this).children(':first').text();
    		    			window.location.href = './product.html?id=' + productLine_name;
    		    		})
    		    		$('.cleaner_line').click(function() {
    		    			var productLine_name = $(this).children(':first').text();
    		    			window.location.href = './product.html?id=' + productLine_name;
    		    		})
    		    		$('.dish_line').click(function() {
    		    			var productLine_name = $(this).children(':first').text();
    		    			window.location.href = './product.html?id=' + productLine_name;
    		    		})
    				} ,
    				error: function () {
    					alert('请求错误！！');
    				} 
    			})
    		}
    		rush();
    		/* setInterval(rush, 5000); */
    		setInterval(setTime, 1000);
    		
    	})
        
    </script>
</body>

</html>